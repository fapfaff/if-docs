"use strict";(self.webpackChunkgreen_software_training=self.webpackChunkgreen_software_training||[]).push([[681],{4137:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),l=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(a),u=n,h=d["".concat(p,".").concat(u)]||d[u]||m[u]||o;return a?r.createElement(h,i(i({ref:t},c),{},{components:a})):r.createElement(h,i({ref:t},c))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var l=2;l<o;l++)i[l]=a[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5513:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var r=a(7462),n=(a(7294),a(4137));const o={"sidebar-position":8},i="Parameters",s={unversionedId:"major-concepts/parameters",id:"major-concepts/parameters",title:"Parameters",description:"Parameters are handled carefully in IF because of the risk of errors propagating through plugin pipelines. We have a set of canonical parameters that are stored in a file called params.ts in the IF repository.",source:"@site/docs/major-concepts/parameters.md",sourceDirName:"major-concepts",slug:"/major-concepts/parameters",permalink:" /if-docs/major-concepts/parameters",draft:!1,editUrl:"https://github.com/fapfaff/if-docs/edit/deploy/docs/major-concepts/parameters.md",tags:[],version:"current",frontMatter:{"sidebar-position":8},sidebar:"tutorialSidebar",previous:{title:"Manifest File",permalink:" /if-docs/major-concepts/manifest-file"},next:{title:"Plugins",permalink:" /if-docs/major-concepts/plugins"}},p={},l=[{value:"Adding parameters",id:"adding-parameters",level:2},{value:"Overriding parameters",id:"overriding-parameters",level:2}],c={toc:l};function m(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"parameters"},"Parameters"),(0,n.kt)("p",null,"Parameters are handled carefully in IF because of the risk of errors propagating through plugin pipelines. We have a set of canonical parameters that are stored in a file called ",(0,n.kt)("inlineCode",{parentName:"p"},"params.ts")," in the IF repository. "),(0,n.kt)("p",null,"Each entry in ",(0,n.kt)("inlineCode",{parentName:"p"},"params.ts")," has the following structure:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"name: {\ndescription: \nunit: \naggregation:\n}\n")),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"name")," is the accepted name for a particular parameter. For example, IF has a parameter, ",(0,n.kt)("inlineCode",{parentName:"p"},"carbon")," that represents carbon in gCO2eq. Anywhere ",(0,n.kt)("inlineCode",{parentName:"p"},"carbon")," exists as a parameter anywhere across the IF and its plugins, the name ",(0,n.kt)("inlineCode",{parentName:"p"},"carbon")," is reserved for carbon with this specific unit. "),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"description")," is a short sentence describing the parameter. "),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"unit")," is the unit the parameter is expected to be expressed in. Prescribing this here is important because it allows everyone to know what units to expect from a plugin that returns this parameter, protecting against unit errors in pipelines."),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"aggregation")," parameter can accept ",(0,n.kt)("inlineCode",{parentName:"p"},"sum"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"avg")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"none"),". This is the method IF should use to aggregate values over time or across a tree. Some values should be summed to aggregate them over time, such as ",(0,n.kt)("inlineCode",{parentName:"p"},"carbon")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"energy")," - it makes sense to add these up as they are absolute values that can be added up over time or across components. However, it does not make sense to aggregate metrics expressed as percentages or proportions - these cases are better aggregated by averaging their values. Some other values should not be manipulated when they are aggregated and instead they are treated as constants that should simply be copied into the aggregate, such as names."),(0,n.kt)("h2",{id:"adding-parameters"},"Adding parameters"),(0,n.kt)("p",null,"The canonical set of parameters protects users against introducing unit errors into plugin pipelines by asserting the units and aggregation methods associated with a specific named parameter. However, this also means that if you create a new plugin that deals with a parameter not currently available in ",(0,n.kt)("inlineCode",{parentName:"p"},"params.ts"),", IF with throw an error. To handle this, you can add your plugin's new parameters to a block of config in the manifest file, and they will be added to the canonical set of parameters at runtime. This effectively gives you read-only access to ",(0,n.kt)("inlineCode",{parentName:"p"},"params.ts")," via the manifest file."),(0,n.kt)("p",null,"Here's an example of the config block that could be added to a manifest to enable a plugin that uses the ",(0,n.kt)("inlineCode",{parentName:"p"},"dummy")," parameter:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yaml"},"params:\n  - name: \n    description:\n    unit:\n    aggregaton:\n")),(0,n.kt)("p",null,"Later, you could raise a pull request to IF to add your parameters to the canonical set in ",(0,n.kt)("inlineCode",{parentName:"p"},"params.ts"),", where it would be discussed and agreed among the community. Eventually, we would like to move the governance of ",(0,n.kt)("inlineCode",{parentName:"p"},"params.ts")," to a separate repository with independent custodians and a dedicated discussion forum."),(0,n.kt)("h2",{id:"overriding-parameters"},"Overriding parameters"),(0,n.kt)("p",null,"If you want to, you can also reject our canonical set of parameters and use your own instead. We do not recommend this, but we do make it possible via a CLI command, ",(0,n.kt)("inlineCode",{parentName:"p"},"override-params"),". In this case, you can provide the path to a new file, structured the same way as ",(0,n.kt)("inlineCode",{parentName:"p"},"params.ts")," that will be used instead of ours. For example:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"ie --manifest <manifest> --override-params my-params.ts\n")),(0,n.kt)("p",null,"The file must parse as JSON or a Javascript object."))}m.isMDXComponent=!0}}]);